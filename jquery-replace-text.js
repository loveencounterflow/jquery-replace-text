// Generated by CoffeeScript 1.9.0
(function() {
  var __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  $.fn.replace_text = function(matcher, replacement, is_raw) {
    var to_be_removed;
    if (is_raw == null) {
      is_raw = false;
    }
    to_be_removed = is_raw ? null : [];
    return this.text_nodes().each(function(idx) {
      var new_value;
      if ((new_value = this.nodeValue.replace(matcher, replacement)) !== this.nodeValue) {
        if (!is_raw && __indexOf.call(new_value, '<') >= 0) {
          ($(this)).before(new_value);
          to_be_removed.push(this);
        } else {
          this.nodeValue = new_value;
        }
      }
      if (!is_raw && to_be_removed.length > 0) {
        return ($(to_be_removed)).remove();
      }
    });
  };

}).call(this);
